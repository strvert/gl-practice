#ifndef __GL_GAME_FILE_H
#define __GL_GAME_FILE_H

#include <fstream>
#include <iostream>
#include <cstdint>
#include <map>
#include <vector>
#include <string>

enum class FileTypes
{
    UNKNOWN,
    PNG,
    JPG,
    BMP,
    TIFF,
    FBX,
    OBJ
};

class File
{
private:
    inline static const std::map<FileTypes, std::vector<std::vector<std::uint8_t>>> MagicNumbers{
        {FileTypes::PNG, {{0x89, 0x50, 0x4E, 0x47}}},

        {FileTypes::JPG, {{0xFF, 0xD8, 0xFF, 0xEE}, {0xFF, 0xD8, 0xFF, 0xE1},
                          {0xFF, 0xD8, 0xFF, 0xDB}, {0xFF, 0xD8, 0xFF, 0xE0},
                          {0xFF, 0xD8, 0xFF, 0xE8}}},

        {FileTypes::BMP, {{0x42, 0x4D}}},

        {FileTypes::TIFF, {{0x49, 0x20, 0x49}, {0x49, 0x49, 0x2A, 0x00},
                           {0x4D, 0x4D, 0x00, 0x2A}, {0x4D, 0x4D, 0x00, 0x2B}}},

        {FileTypes::FBX, {{0x4b, 0x61, 0x79, 0x64, 0x61, 0x72, 0x61, 0x20,
                           0x46, 0x42, 0x58, 0x20, 0x42, 0x69, 0x6e, 0x61,
                           0x72, 0x79, 0x20, 0x20, 0x00, 0x1a, 0x00}}},

        {FileTypes::OBJ, {{0x4b, 0x61, 0x79, 0x64, 0x61, 0x72, 0x61, 0x20,
                           0x46, 0x42, 0x58, 0x20, 0x42, 0x69, 0x6e, 0x61,
                           0x72, 0x79, 0x20, 0x20, 0x00, 0x1a, 0x00}}}
    };

public:
    std::ifstream Ifs;

    File(std::string FileName);

    std::vector<std::uint8_t> Read();
    
    FileTypes Type();
};

#endif // __GL_GAME__FILE_UTILS_H
